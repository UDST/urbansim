

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Real Estate Development Models &mdash; urbansim 0.2dev documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="urbansim 0.2dev documentation" href="../index.html"/>
        <link rel="next" title="UrbanSim Utilities" href="../utils/index.html"/>
        <link rel="prev" title="Location Choice Utilities" href="../models/urbanchoice.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> urbansim
          

          
          </a>

          
            
            
              <div class="version">
                0.2dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Core Models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Real Estate Development Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-urbansim.developer.sqftproforma">Square Foot Pro Forma API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-urbansim.developer.developer">Developer Model API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">UrbanSim Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maps/index.html">DataFrame Explorer</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">urbansim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Real Estate Development Models</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/developer/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="real-estate-development-models">
<h1>Real Estate Development Models<a class="headerlink" href="#real-estate-development-models" title="Permalink to this headline">¶</a></h1>
<p>The real estate development models included in this module are designed to
implement pencil out pro formas, which generally measure the cash inflows and
outflows of a potential investment (in this case, real estate development)
with the outcome being some measure of profitability or return on investment.
Pro formas would normally be performed in a spreadsheet program (e.g. Excel),
but are implemented in vectorized Python implementations so that many (think
millions) of pro formas can be performed at a time.</p>
<p>The functionality is split into two modules - the square foot pro forma and
the developer model - as there are many use cases that call for the pro formas
without the developer model.  The <code class="docutils literal"><span class="pre">sqftproforma</span></code> module computes real
estate feasibility for a set of parcels dependent on allowed uses, prices,
and building costs, but does not actually <em>build</em> anything (both figuratively
and literally).  The <code class="docutils literal"><span class="pre">developer</span> <span class="pre">model</span></code> decides how much to build,
then picks among the set of feasible buildings attempting to meet demand,
and adds the new buildings to the set of current buildings.  Thus
<code class="docutils literal"><span class="pre">developer</span> <span class="pre">model</span></code> is primarily useful in the context of an urban forecast.</p>
<p>An example of the sample code required to generate the set of feasible
buildings is shown below.  This code comes from the <code class="docutils literal"><span class="pre">utils</span></code> module of the
current <a class="reference external" href="https://github.com/udst/sanfran_urbansim">sanfran_urbansim</a> demo.  Notice that the SqFtProForma is
first initialized and a DataFrame of parcels is tested for feasibliity (each
individual parcel is tested for feasibility).  Each <em>use</em> (e.g. retail, office,
residential, etc) is assigned a price per parcel, typically from empirical data
of currents rents and prices in the city but can be the result of forecast
rents and prices as well.  The <code class="docutils literal"><span class="pre">lookup</span></code> function is then called with a
specific building <code class="docutils literal"><span class="pre">form</span></code> and the pro forma returns whether that form is
profitable for each parcel.</p>
<p>A large number of assumptions enter in to the computation of profitability
and these are set in the <a class="reference external" href="#urbansim.developer.sqftproforma.SqFtProFormaConfig">SqFtProFormaConfig</a> module, and include such things
as the set of <code class="docutils literal"><span class="pre">uses</span></code> to model, the mix of <code class="docutils literal"><span class="pre">uses</span></code> into <code class="docutils literal"><span class="pre">forms</span></code>,
the impact of parking requirements, parking costs,
building costs at different heights (taller buildings typically requiring
more expensive construction methods), the profit ratio required,
the building efficiency, parcel coverage, and cap rate to name a few.  See
the API documentation for the complete list and detailed descriptions.</p>
<p>Note that unit mixes don&#8217;t typically enter in to the square foot pro forma
(hence the name).  After discussions with numerous real estate developers,
we found that most developers thought first and foremost in terms of price and
cost per square foot and the arbitrage between, and second in terms of the
translation to unit sizes and mixes in a given market (also larger and
smaller units of a given unit type will typically lower and raise their
prices as stands to reason).  Since getting data on unit mixes in the current
building stock is extremely difficult, most feasibility computations here
happen on a square foot basis and the <code class="docutils literal"><span class="pre">developer</span></code> model below handles the
translation to units.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pf</span> <span class="o">=</span> <span class="n">sqftproforma</span><span class="o">.</span><span class="n">SqFtProForma</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">parcels</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>

<span class="c1"># add prices for each use</span>
<span class="k">for</span> <span class="n">use</span> <span class="ow">in</span> <span class="n">pf</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uses</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">use</span><span class="p">]</span> <span class="o">=</span> <span class="n">parcel_price_callback</span><span class="p">(</span><span class="n">use</span><span class="p">)</span>

<span class="c1"># convert from cost to yearly rent</span>
<span class="k">if</span> <span class="n">residential_to_yearly</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;residential&quot;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">pf</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cap_rate</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">form</span> <span class="ow">in</span> <span class="n">pf</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">forms</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Computing feasibility for form </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">form</span>
    <span class="n">d</span><span class="p">[</span><span class="n">form</span><span class="p">]</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">parcel_use_allowed_callback</span><span class="p">(</span><span class="n">form</span><span class="p">)])</span>

<span class="n">far_predictions</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">keys</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">sim</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s2">&quot;feasibility&quot;</span><span class="p">,</span> <span class="n">far_predictions</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">developer</span> <span class="pre">model</span></code> is responsible for picking among feasible buildings
in order to meet demand.  An example usage of the model is shown below - which
is also lifted form the <a class="reference external" href="https://github.com/udst/sanfran_urbansim">sanfran_urbansim</a> demo.</p>
<p>This module provides a simple utility to compute the number of units (or
amount of floorspace) to build.  Although the vacancy rate <em>can</em> be applied
at the regional level, it can also be used to meet vacancy rates at a
sub-regional level.  The developer model itself is agnostic to which parcels
the user passes it, and the user is responsible for knowing at which level of
geography demand is assumed to operate.  The developer model then chooses
which buildings to &#8220;build,&#8221; usually as a random choice weighted by profitability.
This means more profitable buildings are more likely to be built although
the results are a bit stochastic.</p>
<p>The only remaining steps are then &#8220;bookkeeping&#8221; in the sense that some
additional fields might need to be added (<code class="docutils literal"><span class="pre">year_built</span></code> or a conversion from
developer <code class="docutils literal"><span class="pre">forms</span></code> to <code class="docutils literal"><span class="pre">building_type_ids</span></code>).  Finally the new buildings
and old buildings need to be merged in such a way that the old ids are
preserved and not duplicated (new ids are assigned at the max of the old
ids+1 and then incremented from there).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dev</span> <span class="o">=</span> <span class="n">developer</span><span class="o">.</span><span class="n">Developer</span><span class="p">(</span><span class="n">feasibility</span><span class="o">.</span><span class="n">to_frame</span><span class="p">())</span>

<span class="n">target_units</span> <span class="o">=</span> <span class="n">dev</span><span class="o">.</span>\
    <span class="n">compute_units_to_build</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">agents</span><span class="p">),</span>
                           <span class="n">buildings</span><span class="p">[</span><span class="n">supply_fname</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
                           <span class="n">target_vacancy</span><span class="p">)</span>

<span class="n">new_buildings</span> <span class="o">=</span> <span class="n">dev</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="n">forms</span><span class="p">,</span>
                         <span class="n">target_units</span><span class="p">,</span>
                         <span class="n">parcel_size</span><span class="p">,</span>
                         <span class="n">ave_unit_size</span><span class="p">,</span>
                         <span class="n">total_units</span><span class="p">,</span>
                         <span class="n">max_parcel_size</span><span class="o">=</span><span class="n">max_parcel_size</span><span class="p">,</span>
                         <span class="n">drop_after_build</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">residential</span><span class="o">=</span><span class="n">residential</span><span class="p">,</span>
                         <span class="n">bldg_sqft_per_job</span><span class="o">=</span><span class="n">bldg_sqft_per_job</span><span class="p">)</span>

<span class="k">if</span> <span class="n">year</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">new_buildings</span><span class="p">[</span><span class="s2">&quot;year_built&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year</span>

<span class="k">if</span> <span class="n">form_to_btype_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">new_buildings</span><span class="p">[</span><span class="s2">&quot;building_type_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_buildings</span><span class="p">[</span><span class="s2">&quot;form&quot;</span><span class="p">]</span><span class="o">.</span>\
        <span class="n">apply</span><span class="p">(</span><span class="n">form_to_btype_callback</span><span class="p">)</span>

<span class="n">all_buildings</span> <span class="o">=</span> <span class="n">dev</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">local_columns</span><span class="p">),</span>
                          <span class="n">new_buildings</span><span class="p">[</span><span class="n">buildings</span><span class="o">.</span><span class="n">local_columns</span><span class="p">])</span>

<span class="n">sim</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s2">&quot;buildings&quot;</span><span class="p">,</span> <span class="n">all_buildings</span><span class="p">)</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="module-urbansim.developer.sqftproforma">
<span id="square-foot-pro-forma-api"></span><h2>Square Foot Pro Forma API<a class="headerlink" href="#module-urbansim.developer.sqftproforma" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim.developer.sqftproforma.SqFtProForma">
<em class="property">class </em><code class="descclassname">urbansim.developer.sqftproforma.</code><code class="descname">SqFtProForma</code><span class="sig-paren">(</span><em>config=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/sqftproforma.html#SqFtProForma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.sqftproforma.SqFtProForma" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the square foot based pro forma.</p>
<p>This pro forma has no representation of units - it does not
differentiate between the rent attained by 1BR, 2BR, or 3BR and change
the rents accordingly.  This is largely because it is difficult to get
information on the unit mix in an existing building in order to compute
its acquisition cost.  Thus rents and costs per sqft are used for new
and current buildings which assumes there is a constant return on
increasing and decreasing unit sizes, an extremely useful simplifying
assumption above the project scale (i.e. city of regional scale)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>config</strong> : <cite>SqFtProFormaConfig</cite></p>
<blockquote class="last">
<div><p>The configuration object which should be an
instance of <cite>SqFtProFormaConfig</cite>.  The configuration options for this
pro forma are documented on the configuration object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim.developer.sqftproforma.SqFtProForma.get_ave_cost_sqft">
<code class="descname">get_ave_cost_sqft</code><span class="sig-paren">(</span><em>form</em>, <em>parking_config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/sqftproforma.html#SqFtProForma.get_ave_cost_sqft"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.sqftproforma.SqFtProForma.get_ave_cost_sqft" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the average cost per sqft for the pro forma for a given form
Parameters
&#8212;&#8212;&#8212;-
form : string</p>
<blockquote>
<div>Get a series representing the average cost per sqft for each form in
the config</div></blockquote>
<dl class="docutils">
<dt>parking_config</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">string</span><dd>The parking configuration to get debug info for</dd>
</dl>
<dl class="docutils">
<dt>cost</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">series</span><dd>A series where the index is the far and the values are the average
cost per sqft at which the building is &#8220;break even&#8221; given the
configuration parameters that were passed at run time.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="urbansim.developer.sqftproforma.SqFtProForma.get_debug_info">
<code class="descname">get_debug_info</code><span class="sig-paren">(</span><em>form</em>, <em>parking_config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/sqftproforma.html#SqFtProForma.get_debug_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.sqftproforma.SqFtProForma.get_debug_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the debug info after running the pro forma for a given form and parking
configuration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>form</strong> : string</p>
<blockquote>
<div><p>The form to get debug info for</p>
</div></blockquote>
<p><strong>parking_config</strong> : string</p>
<blockquote>
<div><p>The parking configuration to get debug info for</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>debug_info</strong> : dataframe</p>
<blockquote class="last">
<div><p>A dataframe where the index is the far with many columns
representing intermediate steps in the pro forma computation.
Additional documentation will be added at a later date, although
many of the columns should be fairly self-expanatory.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim.developer.sqftproforma.SqFtProForma.lookup">
<code class="descname">lookup</code><span class="sig-paren">(</span><em>form</em>, <em>df</em>, <em>only_built=True</em>, <em>pass_through=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/sqftproforma.html#SqFtProForma.lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.sqftproforma.SqFtProForma.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>This function does the developer model lookups for all the actual input data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>form</strong> : string</p>
<blockquote>
<div><p>One of the forms specified in the configuration file</p>
</div></blockquote>
<p><strong>df: dataframe</strong></p>
<blockquote>
<div><p>Pass in a single data frame which is indexed by parcel_id and has the
following columns</p>
</div></blockquote>
<p><strong>only_built</strong> : bool</p>
<blockquote>
<div><p>Whether to return only those buildings that are profitable and allowed
by zoning, or whether to return as much information as possible, even if
unlikely to be built (can be used when development might be subsidized
or when debugging)</p>
</div></blockquote>
<p><strong>pass_through</strong> : list of strings</p>
<blockquote>
<div><p>List of field names to take from the input parcel frame and pass
to the output feasibility frame - is usually used for debugging
purposes - these fields will be passed all the way through
developer</p>
</div></blockquote>
<p><strong>Input Dataframe Columns</strong></p>
<p><strong>rent</strong> : dataframe</p>
<blockquote>
<div><p>A set of columns, one for each of the uses passed in the configuration.
Values are yearly rents for that use.  Typical column names would be
&#8220;residential&#8221;, &#8220;retail&#8221;, &#8220;industrial&#8221; and &#8220;office&#8221;</p>
</div></blockquote>
<p><strong>land_cost</strong> : series</p>
<blockquote>
<div><p>A series representing the CURRENT yearly rent for each parcel.  Used to
compute acquisition costs for the parcel.</p>
</div></blockquote>
<p><strong>parcel_size</strong> : series</p>
<blockquote>
<div><p>A series representing the parcel size for each parcel.</p>
</div></blockquote>
<p><strong>max_far</strong> : series</p>
<blockquote>
<div><p>A series representing the maximum far allowed by zoning.  Buildings
will not be built above these fars.</p>
</div></blockquote>
<p><strong>max_height</strong> : series</p>
<blockquote>
<div><p>A series representing the maxmium height allowed by zoning.  Buildings
will not be built above these heights.  Will pick between the min of
the far and height, will ignore on of them if one is nan, but will not
build if both are nan.</p>
</div></blockquote>
<p><strong>max_dua</strong> : series, optional</p>
<blockquote>
<div><p>A series representing the maximum dwelling units per acre allowed by
zoning.  If max_dua is passed, the average unit size should be passed
below to translate from dua to floor space.</p>
</div></blockquote>
<p><strong>ave_unit_size</strong> : series, optional</p>
<blockquote>
<div><p>This is required if max_dua is passed above, otherwise it is optional.
This is the same as the parameter to Developer.pick() (it should be the
same series).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>index</strong> : Series, int</p>
<blockquote>
<div><p>parcel identifiers</p>
</div></blockquote>
<p><strong>building_sqft</strong> : Series, float</p>
<blockquote>
<div><p>The number of square feet for the building to build.  Keep in mind
this includes parking and common space.  Will need a helpful function
to convert from gross square feet to actual usable square feet in
residential units.</p>
</div></blockquote>
<p><strong>building_cost</strong> : Series, float</p>
<blockquote>
<div><p>The cost of constructing the building as given by the
ave_cost_per_sqft from the cost model (for this FAR) and the number
of square feet.</p>
</div></blockquote>
<p><strong>total_cost</strong> : Series, float</p>
<blockquote>
<div><p>The cost of constructing the building plus the cost of acquisition of
the current parcel/building.</p>
</div></blockquote>
<p><strong>building_revenue</strong> : Series, float</p>
<blockquote>
<div><p>The NPV of the revenue for the building to be built, which is the
number of square feet times the yearly rent divided by the cap
rate (with a few adjustment factors including building efficiency).</p>
</div></blockquote>
<p><strong>max_profit_far</strong> : Series, float</p>
<blockquote>
<div><p>The FAR of the maximum profit building (constrained by the max_far and
max_height from the input dataframe).</p>
</div></blockquote>
<p>max_profit :</p>
<blockquote class="last">
<div><p>The profit for the maximum profit building (constrained by the max_far
and max_height from the input dataframe).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urbansim.developer.sqftproforma.SqFtProFormaConfig">
<em class="property">class </em><code class="descclassname">urbansim.developer.sqftproforma.</code><code class="descname">SqFtProFormaConfig</code><a class="reference internal" href="../_modules/urbansim/developer/sqftproforma.html#SqFtProFormaConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.sqftproforma.SqFtProFormaConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>This class encapsulates the configuration options for the square
foot based pro forma.</p>
<dl class="docutils">
<dt>parcel_sizes</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list</span><dd>A list of parcel sizes to test.  Interestingly, right now
the parcel sizes cancel in this style of pro forma computation so
you can set this to something reasonable for debugging purposes -
e.g. [10000].  All sizes can be feet or meters as long as they are
consistently used.</dd>
<dt>fars</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list</span><dd>A list of floor area ratios to use.  FAR is a multiple of
the parcel size that is the total building bulk that is allowed by
zoning on the site.  In this case, all of these ratios will be
tested regardless of zoning and the zoning test will be performed
later.</dd>
<dt>uses</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list</span><dd>A list of space uses to use within a building.  These are
mixed into forms.  Generally speaking, you should only have uses
for which you have an estimate (or observed) values for rents in
the building.  By default, uses are retail, industrial, office,
and residential.</dd>
<dt>forms</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">dict</span><dd>A dictionary where keys are names for the form and values
are also dictionaries where keys are uses and values are the
proportion of that use used in this form.  The values of the
dictionary should sum to 1.0.  For instance, a form called
&#8220;residential&#8221; might have a dict of space allocations equal to
{&#8220;residential&#8221;: 1.0} while a form called &#8220;mixedresidential&#8221;
might have a dictionary of space allocations equal to
{&#8220;retail&#8221;: .1, &#8220;residential&#8221; .9] which is 90% residential and
10% retail.</dd>
<dt>parking_rates</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">dict</span><dd>A dict of rates per thousand square feet where keys are the uses
from the list specified in the attribute above.  The ratios
are typically in the range 0.5 - 3.0 or similar.  So for
instance, a key-value pair of &#8220;retail&#8221;: 2.0 would be two parking
spaces per 1,000 square feet of retail.  This is a per square
foot pro forma, so the more typically parking ratio of spaces
per residential unit must be converted to square feet for use in
this pro forma.</dd>
<dt>sqft_per_rate</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The number of square feet per unit for use in the
parking_rates above.  By default this is set to 1,000 but can be
overridden.</dd>
<dt>parking_configs</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list</span><dd>An expert parameter and is usually unchanged.  By default
it is set to [&#8216;surface&#8217;, &#8216;deck&#8217;, &#8216;underground&#8217;] and very semantic
differences in the computation are performed for each of these
parking configurations.  Generally speaking it will break things
to change this array, but an item can be removed if that parking
configuration should not be tested.</dd>
<dt>parking_sqft_d</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">dict</span><dd>A dictionary where keys are the three parking
configurations listed above and values are square foot uses of
parking spaces in that configuration.  This is to capture the
fact that surface parking is usually more space intensive
than deck or underground parking.</dd>
<dt>parking_cost_d</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">dict</span><dd>The parking cost for each parking configuration.  Keys are the
name of the three parking configurations listed above and values
are dollars PER SQUARE FOOT for parking in that configuration.
Used to capture the fact that underground and deck are far more
expensive than surface parking.</dd>
<dt>height_for_costs</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">list</span><dd>A list of &#8220;break points&#8221; as heights at which construction becomes
more expensive.  Generally these are the heights at which
construction materials change from wood, to concrete, to steel.
Costs are also given as lists by use for each of these break
points and are considered to be valid up to the break point.  A
list would look something like [15, 55, 120, np.inf].</dd>
<dt>costs</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">dict</span><dd>The keys are uses from the attribute above and the values are a
list of floating point numbers of same length as the
height_for_costs attribute.  A key-value pair of
&#8220;residential&#8221;: [160.0, 175.0, 200.0, 230.0] would say that the
residential use if $160/sqft up to 15ft in total height for the
building, $175/sqft up to 55ft, $200/sqft up to 120ft, and
$230/sqft beyond.  A final value in the height_for_costs
array of np.inf is typical.</dd>
<dt>height_per_story</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The per-story height for the building used to turn an
FAR into an actual height.</dd>
<dt>max_retail_height</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The maximum height of retail buildings to consider.</dd>
<dt>max_industrial_height</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The maximum height of industrial buildings to consider.</dd>
<dt>profit_factor</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The ratio of profit a developer expects to make above the break
even rent.  Should be greater than 1.0, e.g. a 10% profit would be
a profit factor of 1.1.</dd>
<dt>building_efficiency</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The efficiency of the building.  This turns total FAR into the
amount of space which gets a square foot rent.  The entire building
gets the cost of course.</dd>
<dt>parcel_coverage</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The ratio of the building footprint to the parcel size.  Also used
to turn an FAR into a height to cost properly.</dd>
<dt>cap_rate</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">float</span><dd>The rate an investor is willing to pay for a cash flow per year.
This means $1/year is equivalent to 1/cap_rate present dollars.
This is a macroeconomic input that is widely available on the
internet.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-urbansim.developer.developer">
<span id="developer-model-api"></span><h2>Developer Model API<a class="headerlink" href="#module-urbansim.developer.developer" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim.developer.developer.Developer">
<em class="property">class </em><code class="descclassname">urbansim.developer.developer.</code><code class="descname">Developer</code><span class="sig-paren">(</span><em>feasibility</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/developer.html#Developer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.developer.Developer" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass the dataframe that is returned by feasibility here</p>
<p>Can also be a dictionary where keys are building forms and values are
the individual data frames returned by the proforma lookup routine.</p>
<dl class="staticmethod">
<dt id="urbansim.developer.developer.Developer.compute_units_to_build">
<em class="property">static </em><code class="descname">compute_units_to_build</code><span class="sig-paren">(</span><em>num_agents</em>, <em>num_units</em>, <em>target_vacancy</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/developer.html#Developer.compute_units_to_build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.developer.Developer.compute_units_to_build" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute number of units to build to match target vacancy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>num_agents</strong> : int</p>
<blockquote>
<div><p>number of agents that need units in the region</p>
</div></blockquote>
<p><strong>num_units</strong> : int</p>
<blockquote>
<div><p>number of units in buildings</p>
</div></blockquote>
<p><strong>target_vacancy</strong> : float (0-1.0)</p>
<blockquote>
<div><p>target vacancy rate</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>number_of_units</strong> : int</p>
<blockquote class="last">
<div><p>the number of units that need to be built</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim.developer.developer.Developer.keep_form_with_max_profit">
<code class="descname">keep_form_with_max_profit</code><span class="sig-paren">(</span><em>forms=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/developer.html#Developer.keep_form_with_max_profit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.developer.Developer.keep_form_with_max_profit" title="Permalink to this definition">¶</a></dt>
<dd><p>This converts the dataframe, which shows all profitable forms,
to the form with the greatest profit, so that more profitable
forms outcompete less profitable forms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>forms: list of strings</strong></p>
<blockquote>
<div><p>List of forms which compete which other.  Can leave some out.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Nothing.  Goes from a multi-index to a single index with only the</p>
<p class="last">most profitable form.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="urbansim.developer.developer.Developer.merge">
<em class="property">static </em><code class="descname">merge</code><span class="sig-paren">(</span><em>old_df</em>, <em>new_df</em>, <em>return_index=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/developer.html#Developer.merge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.developer.Developer.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge two dataframes of buildings.  The old dataframe is
usually the buildings dataset and the new dataframe is a modified
(by the user) version of what is returned by the pick method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>old_df</strong> : dataframe</p>
<blockquote>
<div><p>Current set of buildings</p>
</div></blockquote>
<p><strong>new_df</strong> : dataframe</p>
<blockquote>
<div><p>New buildings to add, usually comes from this module</p>
</div></blockquote>
<p><strong>return_index</strong> : bool</p>
<blockquote>
<div><p>If return_index is true, this method will return the new
index of new_df (which changes in order to create a unique
index after the merge)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>df</strong> : dataframe</p>
<blockquote>
<div><p>Combined DataFrame of buildings, makes sure indexes don&#8217;t overlap</p>
</div></blockquote>
<p><strong>index</strong> : pd.Index</p>
<blockquote class="last">
<div><p>If and only if return_index is True, return the new index for the
new_df dataframe (which changes in order to create a unique index
after the merge)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim.developer.developer.Developer.pick">
<code class="descname">pick</code><span class="sig-paren">(</span><em>form</em>, <em>target_units</em>, <em>parcel_size</em>, <em>ave_unit_size</em>, <em>current_units</em>, <em>max_parcel_size=200000</em>, <em>min_unit_size=400</em>, <em>drop_after_build=True</em>, <em>residential=True</em>, <em>bldg_sqft_per_job=400.0</em>, <em>profit_to_prob_func=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/developer/developer.html#Developer.pick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.developer.developer.Developer.pick" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the buildings from the list that are feasible to build in
order to match the specified demand.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>form</strong> : string or list</p>
<blockquote>
<div><p>One or more of the building forms from the pro forma specification -
e.g. &#8220;residential&#8221; or &#8220;mixedresidential&#8221; - these are configuration
parameters passed previously to the pro forma.  If more than one form
is passed the forms compete with each other (based on profitability)
for which one gets built in order to meet demand.</p>
</div></blockquote>
<p><strong>target_units</strong> : int</p>
<blockquote>
<div><p>The number of units to build.  For non-residential buildings this
should be passed as the number of job spaces that need to be created.</p>
</div></blockquote>
<p><strong>parcel_size</strong> : series</p>
<blockquote>
<div><p>The size of the parcels.  This was passed to feasibility as well,
but should be passed here as well.  Index should be parcel_ids.</p>
</div></blockquote>
<p><strong>ave_unit_size</strong> : series</p>
<blockquote>
<div><p>The average residential unit size around each parcel - this is
indexed by parcel, but is usually a disaggregated version of a
zonal or accessibility aggregation.</p>
</div></blockquote>
<p><strong>bldg_sqft_per_job</strong> : float (default 400.0)</p>
<blockquote>
<div><p>The average square feet per job for this building form.</p>
</div></blockquote>
<p><strong>min_unit_size</strong> : float</p>
<blockquote>
<div><p>Values less than this number in ave_unit_size will be set to this
number.  Deals with cases where units are currently not built.</p>
</div></blockquote>
<p><strong>current_units</strong> : series</p>
<blockquote>
<div><p>The current number of units on the parcel.  Is used to compute the
net number of units produced by the developer model.  Many times
the developer model is redeveloping units (demolishing them) and
is trying to meet a total number of net units produced.</p>
</div></blockquote>
<p><strong>max_parcel_size</strong> : float</p>
<blockquote>
<div><p>Parcels larger than this size will not be considered for
development - usually large parcels should be specified manually
in a development projects table.</p>
</div></blockquote>
<p><strong>drop_after_build</strong> : bool</p>
<blockquote>
<div><p>Whether or not to drop parcels from consideration after they
have been chosen for development.  Usually this is true so as
to not develop the same parcel twice.</p>
</div></blockquote>
<p><strong>residential: bool</strong></p>
<blockquote>
<div><p>If creating non-residential buildings set this to false and
developer will fill in job_spaces rather than residential_units</p>
</div></blockquote>
<p><strong>profit_to_prob_func: function</strong></p>
<blockquote>
<div><p>As there are so many ways to turn the development feasibility
into a probability to select it for building, the user may pass
a function which takes the feasibility dataframe and returns
a series of probabilities.  If no function is passed, the behavior
of this method will not change</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">None if thar are no feasible buildings</p>
<p><strong>new_buildings</strong> : dataframe</p>
<blockquote class="last">
<div><p>DataFrame of buildings to add.  These buildings are rows from the
DataFrame that is returned from feasibility.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../utils/index.html" class="btn btn-neutral float-right" title="UrbanSim Utilities" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../models/urbanchoice.html" class="btn btn-neutral" title="Location Choice Utilities" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, UrbanSim Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>